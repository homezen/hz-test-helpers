general:
    artifacts:
        - 'npm-debug.log'

machine:
    ruby:
        version: '2.2'
    node:
        version: '6.11'
    environment:
        MOCHA_REPORTER: spec
        npm_config_package_lock: false

dependencies:
    pre:
        - uname -a && . /etc/lsb-release && echo $DISTRIB_DESCRIPTION
        - npm i -g npm@^5
        - npm -v

test:
    pre:
        - npm run lint
    post:
        - npm run codecov
        - npm run test-mocha-junit

deployment:
    master:
        branch: master
        commands:
            - cp .npmrc.ci .npmrc # this is a public repo
            - npm info || echo "no info yet"
            - npm run deploy
            - npm info
